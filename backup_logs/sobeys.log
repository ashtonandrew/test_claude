2025-12-20 16:00:24 - root - INFO - Logging initialized. Writing to C:\Users\ashto\Desktop\First_claude\test_claude\data\logs\sobeys.log
2025-12-20 16:00:24 - root - INFO - ============================================================
2025-12-20 16:00:24 - root - INFO - Starting scraper for: sobeys
2025-12-20 16:00:24 - root - INFO - ============================================================
2025-12-20 16:00:24 - root - INFO - Search mode: query='milk', max_pages=1
2025-12-20 16:00:24 - root - INFO - Searching for: milk
2025-12-20 16:00:24 - root - INFO - Launching browser (headless=True)...
2025-12-20 16:00:25 - root - INFO - Browser launched successfully
2025-12-20 16:00:25 - root - INFO - Scraping category page 1: https://www.sobeys.com/en/search?q=milk
2025-12-20 16:00:39 - root - INFO - Fallback to DOM scraping...
2025-12-20 16:00:39 - root - INFO - Extracted 0 products from DOM
2025-12-20 16:00:39 - root - WARNING - No products found on page 1
2025-12-20 16:00:39 - root - INFO - Browser closed
2025-12-20 16:00:39 - root - INFO - Scraped 0 products from search results
2025-12-20 16:00:39 - root - INFO - ============================================================
2025-12-20 16:00:39 - root - INFO - SCRAPING STATISTICS
2025-12-20 16:00:39 - root - INFO - ============================================================
2025-12-20 16:00:39 - root - INFO - total_scraped: 0
2025-12-20 16:00:39 - root - INFO - duplicates_skipped: 0
2025-12-20 16:00:39 - root - INFO - invalid_records: 0
2025-12-20 16:00:39 - root - INFO - pages_processed: 0
2025-12-20 16:00:39 - root - INFO - errors: 0
2025-12-20 16:00:39 - root - INFO - ============================================================
2025-12-20 16:00:39 - root - INFO - ============================================================
2025-12-20 16:00:39 - root - INFO - Scraping completed successfully
2025-12-20 16:00:39 - root - INFO - Output: C:\Users\ashto\Desktop\First_claude\test_claude\data\raw\sobeys\sobeys_products.jsonl
2025-12-20 16:00:39 - root - INFO - ============================================================
2025-12-20 16:00:39 - root - INFO - Browser closed
2025-12-21 22:44:48 - root - INFO - Logging initialized. Writing to C:\Users\ashto\Desktop\First_claude\test_claude\data\logs\sobeys.log
2025-12-21 22:44:48 - root - INFO - ============================================================
2025-12-21 22:44:48 - root - INFO - Starting scraper for: sobeys
2025-12-21 22:44:48 - root - INFO - ============================================================
2025-12-21 22:44:48 - root - INFO - Search mode: query='milk', max_pages=1
2025-12-21 22:44:48 - root - INFO - Searching for: milk
2025-12-21 22:44:48 - root - INFO - Launching stealth browser (headless=True)...
2025-12-21 22:44:49 - root - INFO - Stealth browser launched successfully
2025-12-21 22:44:49 - root - INFO - Starting Google navigation for 'sobeys'...
2025-12-21 22:44:49 - root - INFO - Loading Google homepage...
2025-12-21 22:44:52 - root - WARNING - Google CAPTCHA detected! Skipping Google navigation...
2025-12-21 22:44:52 - root - INFO - Google navigation failed or was skipped, using direct navigation...
2025-12-21 22:44:52 - root - INFO - Navigating directly to: https://www.sobeys.com
2025-12-21 22:45:15 - root - INFO - Selecting store: Airdrie
2025-12-21 22:45:43 - root - WARNING - Could not find store selector button
2025-12-21 22:45:43 - root - INFO - Attempting to continue without explicit store selection...
2025-12-21 22:45:44 - root - INFO - Looking for search box...
2025-12-21 22:45:49 - root - INFO - Found search input: input[placeholder*="Search" i]
2025-12-21 22:45:49 - root - INFO - Typing search query (attempt 1)...
2025-12-21 22:45:54 - root - INFO - Search submitted successfully: https://www.sobeys.com/?query=milk&tab=products
2025-12-21 22:45:54 - root - INFO - Search complete: https://www.sobeys.com/?query=milk&tab=products
2025-12-21 22:45:54 - root - INFO - Page title: Canada's Family Grocery Store | Sobeys Inc.
2025-12-21 22:45:54 - root - INFO - Has __NEXT_DATA__: False
2025-12-21 22:45:54 - root - INFO - Page title: Canada's Family Grocery Store | Sobeys Inc.
2025-12-21 22:45:54 - root - INFO - Has __NEXT_DATA__: False
2025-12-21 22:45:54 - root - INFO - Fallback to DOM scraping...
2025-12-21 22:45:54 - root - INFO - Found 0 product elements in DOM
2025-12-21 22:45:54 - root - INFO - Extracted 0 from DOM
2025-12-21 22:45:54 - root - WARNING - No products found
2025-12-21 22:45:54 - root - INFO - Browser closed
2025-12-21 22:45:54 - root - INFO - Scraped 0 products from search results
2025-12-21 22:45:54 - root - INFO - ============================================================
2025-12-21 22:45:54 - root - INFO - SCRAPING STATISTICS
2025-12-21 22:45:54 - root - INFO - ============================================================
2025-12-21 22:45:54 - root - INFO - total_scraped: 0
2025-12-21 22:45:54 - root - INFO - duplicates_skipped: 0
2025-12-21 22:45:54 - root - INFO - invalid_records: 0
2025-12-21 22:45:54 - root - INFO - pages_processed: 0
2025-12-21 22:45:54 - root - INFO - errors: 0
2025-12-21 22:45:54 - root - INFO - ============================================================
2025-12-21 22:45:54 - root - INFO - ============================================================
2025-12-21 22:45:54 - root - INFO - Scraping completed successfully
2025-12-21 22:45:54 - root - INFO - Output: C:\Users\ashto\Desktop\First_claude\test_claude\data\raw\sobeys\sobeys_products.jsonl
2025-12-21 22:45:54 - root - INFO - ============================================================
2025-12-21 22:45:54 - root - INFO - Browser closed
2025-12-21 23:10:45 - root - INFO - Logging initialized. Writing to C:\Users\ashto\Desktop\First_claude\test_claude\data\logs\sobeys.log
2025-12-21 23:10:45 - root - INFO - ============================================================
2025-12-21 23:10:45 - root - INFO - Starting scraper for: sobeys
2025-12-21 23:10:45 - root - INFO - ============================================================
2025-12-21 23:10:45 - root - INFO - Search mode: query='milk', max_pages=1
2025-12-21 23:10:45 - root - INFO - Searching for: milk
2025-12-21 23:10:45 - asyncio - DEBUG - Using proactor: IocpProactor
2025-12-21 23:10:46 - root - INFO - Launching stealth browser (headless=False)...
2025-12-21 23:10:47 - root - INFO - Stealth browser launched successfully
2025-12-21 23:10:47 - root - INFO - Starting Google navigation for 'sobeys'...
2025-12-21 23:10:47 - root - INFO - Loading Google homepage...
2025-12-21 23:10:49 - root - WARNING - Google CAPTCHA detected! Skipping Google navigation...
2025-12-21 23:10:49 - root - INFO - Google navigation failed or was skipped, using direct navigation...
2025-12-21 23:10:49 - root - INFO - Navigating directly to: https://www.sobeys.com
2025-12-21 23:11:12 - root - INFO - Selecting store: Airdrie
2025-12-21 23:11:40 - root - WARNING - Could not find store selector button
2025-12-21 23:11:40 - root - INFO - Attempting to continue without explicit store selection...
2025-12-21 23:11:41 - root - INFO - Looking for search box...
2025-12-21 23:11:46 - root - INFO - Found search input: input[placeholder*="Search" i]
2025-12-21 23:11:47 - root - INFO - Typing search query (attempt 1)...
2025-12-21 23:11:51 - root - INFO - Search submitted successfully: https://www.sobeys.com/?query=milk&tab=products
2025-12-21 23:11:51 - root - INFO - Waiting for search results to render...
2025-12-21 23:11:51 - root - INFO - Waiting for products: [data-component="product-tile"]
2025-12-21 23:12:36 - root - DEBUG - Selector '[data-component="product-tile"]' not found: Page.wait_for_selector: Timeout 45000ms exceeded.
Call log:
  - waiting for locator("[data-component=\"product-tile\"]") to be visible

2025-12-21 23:12:36 - root - INFO - Waiting for products: .product-tile
2025-12-21 23:13:21 - root - DEBUG - Selector '.product-tile' not found: Page.wait_for_selector: Timeout 45000ms exceeded.
Call log:
  - waiting for locator(".product-tile") to be visible

2025-12-21 23:13:21 - root - INFO - Waiting for products: .product-card
2025-12-21 23:14:06 - root - DEBUG - Selector '.product-card' not found: Page.wait_for_selector: Timeout 45000ms exceeded.
Call log:
  - waiting for locator(".product-card") to be visible

2025-12-21 23:14:06 - root - INFO - Waiting for products: [class*="ProductTile"]
2025-12-21 23:14:51 - root - DEBUG - Selector '[class*="ProductTile"]' not found: Page.wait_for_selector: Timeout 45000ms exceeded.
Call log:
  - waiting for locator("[class*=\"ProductTile\"]") to be visible

2025-12-21 23:14:51 - root - INFO - Waiting for products: [data-testid*="product"]
2025-12-21 23:14:51 - root - INFO - Found 1 elements matching [data-testid*="product"]
2025-12-21 23:14:51 - root - INFO - Products successfully loaded! Found 1 items
2025-12-21 23:14:53 - root - INFO - Search complete: https://www.sobeys.com/?query=milk&tab=products
2025-12-21 23:14:53 - root - INFO - Page diagnosis:
2025-12-21 23:14:53 - root - INFO -   URL: https://www.sobeys.com/?query=milk&tab=products
2025-12-21 23:14:53 - root - INFO -   Title: Canada's Family Grocery Store | Sobeys Inc.
2025-12-21 23:14:53 - root - INFO -   Found 1 elements: '[data-testid*="product"]'
2025-12-21 23:14:53 - root - INFO -   Has __NEXT_DATA__: False
2025-12-21 23:14:53 - root - INFO - Page diagnosis:
2025-12-21 23:14:53 - root - INFO -   URL: https://www.sobeys.com/?query=milk&tab=products
2025-12-21 23:14:53 - root - INFO -   Title: Canada's Family Grocery Store | Sobeys Inc.
2025-12-21 23:14:53 - root - INFO -   Found 1 elements: '[data-testid*="product"]'
2025-12-21 23:14:53 - root - INFO -   Has __NEXT_DATA__: False
2025-12-21 23:14:53 - root - INFO - Fallback to DOM scraping...
2025-12-21 23:14:53 - root - INFO - Found 1 elements with selector: [data-testid*="product"]
2025-12-21 23:14:53 - root - INFO - Extracted 0 from DOM
2025-12-21 23:14:53 - root - WARNING - No products found
2025-12-21 23:14:53 - root - INFO - Browser closed
2025-12-21 23:14:53 - root - INFO - Scraped 0 products from search results
2025-12-21 23:14:53 - root - INFO - ============================================================
2025-12-21 23:14:53 - root - INFO - SCRAPING STATISTICS
2025-12-21 23:14:53 - root - INFO - ============================================================
2025-12-21 23:14:53 - root - INFO - total_scraped: 0
2025-12-21 23:14:53 - root - INFO - duplicates_skipped: 0
2025-12-21 23:14:53 - root - INFO - invalid_records: 0
2025-12-21 23:14:53 - root - INFO - pages_processed: 0
2025-12-21 23:14:53 - root - INFO - errors: 0
2025-12-21 23:14:53 - root - INFO - ============================================================
2025-12-21 23:14:53 - root - DEBUG - Checkpoint saved: C:\Users\ashto\Desktop\First_claude\test_claude\data\checkpoints\sobeys_checkpoint.json
2025-12-21 23:14:53 - root - INFO - ============================================================
2025-12-21 23:14:53 - root - INFO - Scraping completed successfully
2025-12-21 23:14:53 - root - INFO - Output: C:\Users\ashto\Desktop\First_claude\test_claude\data\raw\sobeys\sobeys_products.jsonl
2025-12-21 23:14:53 - root - INFO - ============================================================
2025-12-21 23:14:53 - root - INFO - Browser closed
2025-12-23 19:48:34 - root - INFO - Logging initialized. Writing to C:\Users\ashto\Desktop\First_claude\test_claude\data\logs\sobeys.log
2025-12-23 19:48:34 - root - INFO - ============================================================
2025-12-23 19:48:34 - root - INFO - Starting scraper for: sobeys
2025-12-23 19:48:34 - root - INFO - ============================================================
2025-12-23 19:48:34 - root - INFO - Search mode: query='milk', max_pages=1
2025-12-23 19:48:34 - root - INFO - Searching for: milk
2025-12-23 19:48:34 - asyncio - DEBUG - Using proactor: IocpProactor
2025-12-23 19:48:43 - root - INFO - Launching stealth browser (headless=False)...
2025-12-23 19:48:44 - root - INFO - Stealth browser launched successfully
2025-12-23 19:48:44 - root - INFO - Starting Google navigation for 'sobeys'...
2025-12-23 19:48:44 - root - INFO - Loading Google homepage...
2025-12-23 19:48:47 - root - WARNING - Google CAPTCHA detected! Skipping Google navigation...
2025-12-23 19:48:47 - root - INFO - Google navigation failed or was skipped, using direct navigation...
2025-12-23 19:48:47 - root - INFO - Navigating directly to: https://www.sobeys.com
2025-12-23 19:49:20 - root - ERROR - Error dismissing site popups: Timeout 10000ms exceeded.
Traceback (most recent call last):
  File "C:\Users\ashto\Desktop\First_claude\test_claude\scrapers\sites\safeway.py", line 528, in _dismiss_site_popups
    page.wait_for_load_state('networkidle', timeout=10000)
  File "C:\Users\ashto\Desktop\First_claude\.venv\Lib\site-packages\playwright\sync_api\_generated.py", line 9148, in wait_for_load_state
    self._sync(self._impl_obj.wait_for_load_state(state=state, timeout=timeout))
  File "C:\Users\ashto\Desktop\First_claude\.venv\Lib\site-packages\playwright\_impl\_sync_base.py", line 115, in _sync
    return task.result()
           ^^^^^^^^^^^^^
  File "C:\Users\ashto\Desktop\First_claude\.venv\Lib\site-packages\playwright\_impl\_page.py", line 572, in wait_for_load_state
    return await self._main_frame.wait_for_load_state(**locals_to_params(locals()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ashto\Desktop\First_claude\.venv\Lib\site-packages\playwright\_impl\_frame.py", line 273, in wait_for_load_state
    return await self._wait_for_load_state_impl(state, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ashto\Desktop\First_claude\.venv\Lib\site-packages\playwright\_impl\_frame.py", line 301, in _wait_for_load_state_impl
    await waiter.result()
playwright._impl._errors.TimeoutError: Timeout 10000ms exceeded.
2025-12-23 19:49:20 - root - INFO - Selecting store: Airdrie
2025-12-23 19:49:48 - root - WARNING - Could not find store selector button
2025-12-23 19:49:48 - root - INFO - Attempting to continue without explicit store selection...
2025-12-23 19:49:49 - root - INFO - Looking for search box...
2025-12-23 19:49:54 - root - INFO - Found search input: input[placeholder*="Search" i]
2025-12-23 19:49:55 - root - INFO - Typing search query (attempt 1)...
2025-12-23 19:49:59 - root - INFO - Search submitted successfully: https://www.sobeys.com/?query=milk&tab=products
2025-12-23 19:49:59 - root - INFO - Waiting for search results to render...
2025-12-23 19:49:59 - root - INFO - Waiting for products: [data-component="product-tile"]
2025-12-23 19:50:44 - root - DEBUG - Selector '[data-component="product-tile"]' not found: Page.wait_for_selector: Timeout 45000ms exceeded.
Call log:
  - waiting for locator("[data-component=\"product-tile\"]") to be visible

2025-12-23 19:50:44 - root - INFO - Waiting for products: .product-tile
2025-12-23 19:51:29 - root - DEBUG - Selector '.product-tile' not found: Page.wait_for_selector: Timeout 45000ms exceeded.
Call log:
  - waiting for locator(".product-tile") to be visible

2025-12-23 19:51:29 - root - INFO - Waiting for products: .product-card
2025-12-23 19:52:14 - root - DEBUG - Selector '.product-card' not found: Page.wait_for_selector: Timeout 45000ms exceeded.
Call log:
  - waiting for locator(".product-card") to be visible

2025-12-23 19:52:14 - root - INFO - Waiting for products: [class*="ProductTile"]
2025-12-23 19:52:59 - root - DEBUG - Selector '[class*="ProductTile"]' not found: Page.wait_for_selector: Timeout 45000ms exceeded.
Call log:
  - waiting for locator("[class*=\"ProductTile\"]") to be visible

2025-12-23 19:52:59 - root - INFO - Waiting for products: [data-testid*="product"]
2025-12-23 19:52:59 - root - INFO - Found 1 elements matching [data-testid*="product"]
2025-12-23 19:52:59 - root - INFO - Products successfully loaded! Found 1 items
2025-12-23 19:53:01 - root - INFO - Search complete: https://www.sobeys.com/?query=milk&tab=products
2025-12-23 19:53:01 - root - INFO - Page diagnosis:
2025-12-23 19:53:01 - root - INFO -   URL: https://www.sobeys.com/?query=milk&tab=products
2025-12-23 19:53:01 - root - INFO -   Title: Canada's Family Grocery Store | Sobeys Inc.
2025-12-23 19:53:01 - root - INFO -   Found 1 elements: '[data-testid*="product"]'
2025-12-23 19:53:01 - root - INFO -   Has __NEXT_DATA__: False
2025-12-23 19:53:01 - root - INFO - Extracting from page: https://www.sobeys.com/?query=milk&tab=products
2025-12-23 19:53:01 - root - INFO - Page title: Canada's Family Grocery Store | Sobeys Inc.
2025-12-23 19:53:01 - root - INFO - Fallback to DOM scraping...
2025-12-23 19:53:01 - root - INFO - Found 1 elements with selector: [data-testid*="product"]
2025-12-23 19:53:01 - root - DEBUG - Processing element 1/1
2025-12-23 19:53:01 - root - DEBUG - Extracting from element:
<button class="w-1/3 xs:w-auto" data-testid="products-tab-button"><div class="aria-selected:bg-brandSecondary aria-selected:relative aria-selected:rounded-t-lg aria-selected:text-brandWhite bg-transparent py-[14px] px-[12px] border-b-transparent border-b-[2px] max-w-[unset]
                              text-body md:min-w-[145px] text-brandBlack text-center xs:min-w-[144px] min-w-[90px] min-w-auto aria-selected:after:content-[''] aria-selected:after:w-full aria-selected:after:h-[3px] aria-select
2025-12-23 19:53:01 - root - DEBUG - Element text content: Products(2542)
2025-12-23 19:53:02 - root - DEBUG - Extracted name from first text line: Products(2542)
2025-12-23 19:53:02 - root - DEBUG - Found brand: Products(2542)
2025-12-23 19:53:02 - root - INFO - Successfully extracted product: Products(2542) - $None
2025-12-23 19:53:02 - root - INFO - Extracted 1 from 1 DOM elements
2025-12-23 19:53:02 - root - INFO - Batch saved 1 records
2025-12-23 19:53:02 - root - INFO - Page 1: Saved 1/1
2025-12-23 19:53:02 - root - INFO - Browser closed
2025-12-23 19:53:02 - root - INFO - Scraped 1 products from search results
2025-12-23 19:53:02 - root - INFO - ============================================================
2025-12-23 19:53:02 - root - INFO - SCRAPING STATISTICS
2025-12-23 19:53:02 - root - INFO - ============================================================
2025-12-23 19:53:02 - root - INFO - total_scraped: 1
2025-12-23 19:53:02 - root - INFO - duplicates_skipped: 0
2025-12-23 19:53:02 - root - INFO - invalid_records: 0
2025-12-23 19:53:02 - root - INFO - pages_processed: 1
2025-12-23 19:53:02 - root - INFO - errors: 0
2025-12-23 19:53:02 - root - INFO - ============================================================
2025-12-23 19:53:02 - root - DEBUG - Checkpoint saved: C:\Users\ashto\Desktop\First_claude\test_claude\data\checkpoints\sobeys_checkpoint.json
2025-12-23 19:53:02 - root - INFO - ============================================================
2025-12-23 19:53:02 - root - INFO - Scraping completed successfully
2025-12-23 19:53:02 - root - INFO - Output: C:\Users\ashto\Desktop\First_claude\test_claude\data\raw\sobeys\sobeys_products.jsonl
2025-12-23 19:53:02 - root - INFO - ============================================================
2025-12-23 19:53:02 - root - INFO - Browser closed
2025-12-23 20:33:38 - root - INFO - Logging initialized. Writing to C:\Users\ashto\Desktop\First_claude\test_claude\data\logs\sobeys.log
2025-12-23 20:33:38 - root - INFO - ============================================================
2025-12-23 20:33:38 - root - INFO - Starting scraper for: sobeys
2025-12-23 20:33:38 - root - INFO - ============================================================
2025-12-23 20:33:38 - root - INFO - Search mode: query='milk', max_pages=1
2025-12-23 20:33:38 - root - INFO - Searching for: milk
2025-12-23 20:33:44 - root - INFO - Launching stealth browser (headless=False)...
2025-12-23 20:33:45 - root - INFO - Stealth browser launched successfully
2025-12-23 20:33:45 - root - INFO - Starting Google navigation for 'sobeys'...
2025-12-23 20:33:45 - root - INFO - Loading Google homepage...
2025-12-23 20:33:48 - root - WARNING - Google CAPTCHA detected! Skipping Google navigation...
2025-12-23 20:33:48 - root - INFO - Google navigation failed or was skipped, using direct navigation...
2025-12-23 20:33:48 - root - INFO - Navigating directly to: https://www.sobeys.com
2025-12-23 20:34:11 - root - INFO - Selecting store: Airdrie
2025-12-23 20:34:39 - root - WARNING - Could not find store selector button
2025-12-23 20:34:39 - root - INFO - Attempting to continue without explicit store selection...
2025-12-23 20:34:40 - root - INFO - Looking for search box...
2025-12-23 20:34:45 - root - INFO - Found search input: input[placeholder*="Search" i]
2025-12-23 20:34:45 - root - INFO - Typing search query (attempt 1)...
2025-12-23 20:34:50 - root - INFO - Search submitted successfully: https://www.sobeys.com/?query=milk&tab=products
2025-12-23 20:34:50 - root - INFO - Waiting for search results to render...
2025-12-23 20:34:50 - root - INFO - Waiting for products: [data-component="product-tile"]
2025-12-23 20:35:35 - root - INFO - Waiting for products: .product-tile
2025-12-23 20:36:20 - root - INFO - Waiting for products: .product-card
2025-12-23 20:37:05 - root - INFO - Waiting for products: [class*="ProductTile"]
2025-12-23 20:37:50 - root - INFO - Waiting for products: [data-testid*="product"]
2025-12-23 20:37:50 - root - INFO - Found 1 elements matching [data-testid*="product"]
2025-12-23 20:37:50 - root - INFO - Products successfully loaded! Found 1 items
2025-12-23 20:37:52 - root - INFO - Search complete: https://www.sobeys.com/?query=milk&tab=products
2025-12-23 20:37:52 - root - INFO - Page diagnosis:
2025-12-23 20:37:52 - root - INFO -   URL: https://www.sobeys.com/?query=milk&tab=products
2025-12-23 20:37:52 - root - INFO -   Title: Canada's Family Grocery Store | Sobeys Inc.
2025-12-23 20:37:52 - root - INFO -   Found 1 elements: '[data-testid*="product"]'
2025-12-23 20:37:52 - root - INFO -   Has __NEXT_DATA__: False
2025-12-23 20:37:52 - root - INFO - Extracting from page: https://www.sobeys.com/?query=milk&tab=products
2025-12-23 20:37:52 - root - INFO - Page title: Canada's Family Grocery Store | Sobeys Inc.
2025-12-23 20:37:52 - root - INFO - Fallback to DOM scraping...
2025-12-23 20:37:52 - root - INFO - Found 1 elements with selector: [data-testid*="product"]
2025-12-23 20:37:52 - root - INFO - Successfully extracted product: Products(2555) - $None
2025-12-23 20:37:52 - root - INFO - Extracted 1 from 1 DOM elements
2025-12-23 20:37:52 - root - INFO - Batch saved 1 records
2025-12-23 20:37:52 - root - INFO - Page 1: Saved 1/1
2025-12-23 20:37:52 - root - INFO - Browser closed
2025-12-23 20:37:52 - root - INFO - Scraped 1 products from search results
2025-12-23 20:37:52 - root - INFO - ============================================================
2025-12-23 20:37:52 - root - INFO - SCRAPING STATISTICS
2025-12-23 20:37:52 - root - INFO - ============================================================
2025-12-23 20:37:52 - root - INFO - total_scraped: 1
2025-12-23 20:37:52 - root - INFO - duplicates_skipped: 0
2025-12-23 20:37:52 - root - INFO - invalid_records: 0
2025-12-23 20:37:52 - root - INFO - pages_processed: 1
2025-12-23 20:37:52 - root - INFO - errors: 0
2025-12-23 20:37:52 - root - INFO - ============================================================
2025-12-23 20:37:52 - root - INFO - ============================================================
2025-12-23 20:37:52 - root - INFO - Scraping completed successfully
2025-12-23 20:37:52 - root - INFO - Output: C:\Users\ashto\Desktop\First_claude\test_claude\data\raw\sobeys\sobeys_products.jsonl
2025-12-23 20:37:52 - root - INFO - ============================================================
2025-12-23 20:37:52 - root - INFO - Browser closed
2025-12-23 20:50:20 - root - INFO - Logging initialized. Writing to C:\Users\ashto\Desktop\First_claude\test_claude\data\logs\sobeys.log
2025-12-23 20:50:20 - root - INFO - ============================================================
2025-12-23 20:50:20 - root - INFO - Starting scraper for: sobeys
2025-12-23 20:50:20 - root - INFO - ============================================================
2025-12-23 20:50:20 - root - INFO - Search mode: query='milk', max_pages=1
2025-12-23 20:50:20 - root - INFO - Searching for: milk
2025-12-23 20:50:20 - root - INFO - Launching stealth browser (headless=False)...
2025-12-23 20:50:21 - root - INFO - Stealth browser launched successfully
2025-12-23 20:50:21 - root - INFO - Starting Google navigation for 'sobeys'...
2025-12-23 20:50:21 - root - INFO - Loading Google homepage...
2025-12-23 20:50:23 - root - WARNING - Google CAPTCHA detected! Skipping Google navigation...
2025-12-23 20:50:23 - root - INFO - Google navigation failed or was skipped, using direct navigation...
2025-12-23 20:50:23 - root - INFO - Navigating directly to: https://www.sobeys.com
2025-12-23 20:50:56 - root - ERROR - Error dismissing site popups: Timeout 10000ms exceeded.
Traceback (most recent call last):
  File "C:\Users\ashto\Desktop\first_claude\test_claude\scrapers\sites\safeway.py", line 528, in _dismiss_site_popups
    page.wait_for_load_state('networkidle', timeout=10000)
  File "C:\Users\ashto\AppData\Local\Programs\Python\Python312\Lib\site-packages\playwright\sync_api\_generated.py", line 9117, in wait_for_load_state
    self._sync(self._impl_obj.wait_for_load_state(state=state, timeout=timeout))
  File "C:\Users\ashto\AppData\Local\Programs\Python\Python312\Lib\site-packages\playwright\_impl\_sync_base.py", line 115, in _sync
    return task.result()
           ^^^^^^^^^^^^^
  File "C:\Users\ashto\AppData\Local\Programs\Python\Python312\Lib\site-packages\playwright\_impl\_page.py", line 576, in wait_for_load_state
    return await self._main_frame.wait_for_load_state(**locals_to_params(locals()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ashto\AppData\Local\Programs\Python\Python312\Lib\site-packages\playwright\_impl\_frame.py", line 273, in wait_for_load_state
    return await self._wait_for_load_state_impl(state, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ashto\AppData\Local\Programs\Python\Python312\Lib\site-packages\playwright\_impl\_frame.py", line 301, in _wait_for_load_state_impl
    await waiter.result()
playwright._impl._errors.TimeoutError: Timeout 10000ms exceeded.
2025-12-23 20:50:56 - root - INFO - Selecting store: Airdrie
2025-12-23 20:51:24 - root - WARNING - Could not find store selector button
2025-12-23 20:51:24 - root - INFO - Attempting to continue without explicit store selection...
2025-12-23 20:51:25 - root - INFO - Looking for search box...
2025-12-23 20:51:30 - root - INFO - Found search input: input[placeholder*="Search" i]
2025-12-23 20:51:31 - root - INFO - Typing search query (attempt 1)...
2025-12-23 20:51:35 - root - INFO - Search submitted successfully: https://www.sobeys.com/?query=milk&tab=products
2025-12-23 20:51:35 - root - INFO - Waiting for search results to render...
2025-12-23 20:51:35 - root - INFO - Waiting for products: [data-component="product-tile"]
2025-12-23 20:52:20 - root - INFO - Waiting for products: .product-tile
2025-12-23 20:53:05 - root - INFO - Waiting for products: .product-card
2025-12-23 20:53:50 - root - INFO - Waiting for products: [class*="ProductTile"]
2025-12-23 20:54:35 - root - INFO - Waiting for products: [data-testid*="product"]
2025-12-23 20:54:35 - root - INFO - Found 1 elements matching [data-testid*="product"]
2025-12-23 20:54:35 - root - INFO - Products successfully loaded! Found 1 items
2025-12-23 20:54:37 - root - INFO - Search complete: https://www.sobeys.com/?query=milk&tab=products
2025-12-23 20:54:37 - root - INFO - Page diagnosis:
2025-12-23 20:54:37 - root - INFO -   URL: https://www.sobeys.com/?query=milk&tab=products
2025-12-23 20:54:37 - root - INFO -   Title: Canada's Family Grocery Store | Sobeys Inc.
2025-12-23 20:54:37 - root - INFO -   Found 1 elements: '[data-testid*="product"]'
2025-12-23 20:54:37 - root - INFO -   Has __NEXT_DATA__: False
2025-12-23 20:54:37 - root - INFO - Extracting from page: https://www.sobeys.com/?query=milk&tab=products
2025-12-23 20:54:37 - root - INFO - Page title: Canada's Family Grocery Store | Sobeys Inc.
2025-12-23 20:54:37 - root - INFO - Fallback to DOM scraping...
2025-12-23 20:54:37 - root - INFO - Found 1 elements with selector: [data-testid*="product"]
2025-12-23 20:54:37 - root - INFO - Successfully extracted product: Products(2550) - $None
2025-12-23 20:54:37 - root - INFO - Extracted 1 from 1 DOM elements
2025-12-23 20:54:37 - root - INFO - Batch saved 1 records
2025-12-23 20:54:37 - root - INFO - Page 1: Saved 1/1
2025-12-23 20:54:37 - root - INFO - Browser closed
2025-12-23 20:54:37 - root - INFO - Scraped 1 products from search results
2025-12-23 20:54:37 - root - INFO - ============================================================
2025-12-23 20:54:37 - root - INFO - SCRAPING STATISTICS
2025-12-23 20:54:37 - root - INFO - ============================================================
2025-12-23 20:54:37 - root - INFO - total_scraped: 1
2025-12-23 20:54:37 - root - INFO - duplicates_skipped: 0
2025-12-23 20:54:37 - root - INFO - invalid_records: 0
2025-12-23 20:54:37 - root - INFO - pages_processed: 1
2025-12-23 20:54:37 - root - INFO - errors: 0
2025-12-23 20:54:37 - root - INFO - ============================================================
2025-12-23 20:54:37 - root - INFO - ============================================================
2025-12-23 20:54:37 - root - INFO - Scraping completed successfully
2025-12-23 20:54:37 - root - INFO - Output: C:\Users\ashto\Desktop\First_claude\test_claude\data\raw\sobeys\sobeys_products.jsonl
2025-12-23 20:54:37 - root - INFO - ============================================================
2025-12-23 20:54:37 - root - INFO - Browser closed
